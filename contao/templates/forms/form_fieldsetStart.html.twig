{% set widgetClass = this.class|default('') %}
{% set injectedAttrs = '' %}

{% if widgetClass starts with '"' %}
    {% set injected = widgetClass|slice(1) %}

    {# we have to manipulate the class="-string since CFF appends the conditions to it #}
    {# Split at '">': (left side: data-cff-condition="...") #}
    {% set parts = injected|split('">', 2) %}
    {% set injectedAttrs = parts[0] %}

    {# attribute fragment has to ends with a closing quote #}
    {% if injectedAttrs and not (injectedAttrs ends with '"') %}
            {% set injectedAttrs = injectedAttrs ~ '"' %}
    {% endif %}

    {# kill injected part from class list #}
    {% set widgetClass = '' %}
{% endif %}

<fieldset class="fieldset formbody__area {{ widgetClass }} {{ getAllResponsiveClasses(arrConfiguration)|join(' ') }}" {{ injectedAttrs|raw }}>
    <div class="fieldset__inside {{ getAllInnerContainerClasses(arrConfiguration)|join(' ') }}">
        {% set legend = this.label|default(label|default('')) %}
        {% if legend %}
                <legend>{{ legend }}</legend>
        {% endif %}
